package com.app.features;

import com.app.dto.Account;

public class PaymentOps {

    public static void main(String args[]) {
        
        Account acct1 = new Account("342432424424", 1000.00);
        Account acct2 = new Account("987654321000", 500.00);

        System.out.println("--- Before Transfer ---");
        System.out.println("Account 1 details - No: " + acct1.accoutNo() + " | Balance: " + acct1.balance());
        System.out.println("Account 2 details - No: " + acct2.accoutNo() + " | Balance: " + acct2.balance());
        
        System.out.println("\n--- Transferring 200.00... ---");
        
        PaymentOps ops = new PaymentOps();
        boolean success = ops.fundTransfer(acct1, acct2, 200.00);

        if (success) {
            System.out.println("Transfer successful!");
        } else {
            System.out.println("Transfer failed.");
        }

        System.out.println("\n--- After Transfer ---");
        System.out.println("Account 1 details - No: " + acct1.accoutNo() + " | Balance: " + acct1.balance());
        System.out.println("Account 2 details - No: " + acct2.accoutNo() + " | Balance: " + acct2.balance());

        System.out.println("\n--- Attempting to transfer 5000.00... ---");
        success = ops.fundTransfer(acct1, acct2, 5000.00);
        if (!success) {
            System.out.println("Transfer failed as expected.");
        }
    }

    public boolean fundTransfer(Account fromAcct, Account toAcct, double amount) {
        
        if (amount <= 0) {
            System.out.println("Error: Transfer amount must be positive.");
            return false;
        }

        if (fromAcct.balance() >= amount) {
            
            fromAcct.setBalance(fromAcct.balance() - amount);
            toAcct.setBalance(toAcct.balance() + amount);
            
            return true;
            
        } else {
            System.out.println("Error: Insufficient funds in account " + fromAcct.accoutNo());
            return false;
        }
    }
}