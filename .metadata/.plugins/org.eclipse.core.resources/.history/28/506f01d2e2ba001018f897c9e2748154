package com.app.features;

import com.app.dto.Account;
import com.app.dto.Beneficiary;

public class PaymentOps {

    public static void main(String args[]) {
        
        Account acct1 = new Account("342432424424", 1000.00);
        Account acct2 = new Account("987654321000", 500.00);

        System.out.println("--- Setup ---");
        System.out.println("Account 1 - No: " + acct1.accoutNo() + " | Balance: " + acct1.balance());
        System.out.println("Account 2 - No: " + acct2.accoutNo() + " | Balance: " + acct2.balance());
        
        System.out.println("\n--- Adding Beneficiary ---");
        Beneficiary friendBeneficiary = new Beneficiary("My Friend", "987654321000");
        acct1.addBeneficiary(friendBeneficiary);
        acct1.addBeneficiary(new Beneficiary("Test", "111111"));
        
        System.out.println("Account 1 Beneficiaries: " + acct1.getBeneficiaries().size());

        
        System.out.println("\n--- Transferring 200.00 to Beneficiary 'My Friend'... ---");
        
        PaymentOps ops = new PaymentOps();
        
        // In a real app, you would look up "acct2" from the bank's database
        // using the beneficiary's account number. For this example,
        // we already have the acct2 object.
        boolean success = ops.fundTransfer(acct1, acct2, 200.00);

        if (success) {
            System.out.println("Transfer to beneficiary successful!");
        } else {
            System.out.println("Transfer to beneficiary failed.");
        }

        System.out.println("\n--- Final Balances ---");
        System.out.println("Account 1 details - No: " + acct1.accoutNo() + " | Balance: " + acct1.balance());
        System.out.println("Account 2 details - No: " + acct2.accoutNo() + " | Balance: " + acct2.balance());
    }

    public boolean fundTransfer(Account fromAcct, Account toAcct, double amount) {
        
        if (amount <= 0) {
            System.out.println("Error: Transfer amount must be positive.");
            return false;
        }

        if (fromAcct.balance() >= amount) {
            
            fromAcct.setBalance(fromAcct.balance() - amount);
            toAcct.setBalance(toAcct.balance() + amount);
            
            return true;
            
        } else {
            System.out.println("Error: Insufficient funds in account " + fromAcct.accoutNo());
            return false;
        }
    }
}